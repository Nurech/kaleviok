@if (file(); as f) {
    <mat-card appearance="outlined" class="my-1">
        <mat-card-content class="p-1">
            <div class="flex flex-col">
                <div class="flex flex-row items-center">
                    @if (f.metadata?.contentType?.includes('image')) {
                        <mat-icon>image</mat-icon>
                    } @else {
                        <mat-icon>description</mat-icon>
                    }
                    <div class="flex items-center space-x-2 overflow-hidden justify-between w-full">
                        <p class="truncate grow min-w-0 ml-2">{{ f.name }}</p>
                        @if(f?.metadata?.size) {
                            <span class="italic text-gray-500 flex-shrink-0 pr-1">{{ ((f.metadata?.size || 0) / 1048576) | number:'1.2-2' }} MB</span>
                        }
                        <div class="mb-1 flex items-center">
                            <button mat-icon-button (click)="deleteFile()">
                                <mat-icon class="mb-2">delete_forever</mat-icon>
                            </button>
                        </div>
                    </div>

                </div>
                @if (f.progress < 100) {
                    <div class="progress-spinner">
                        <mat-progress-bar mode="determinate" [value]="f.progress"></mat-progress-bar>
                    </div>
                }
            </div>
        </mat-card-content>
    </mat-card>
}
